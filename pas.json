{"script":{"topfaucet":"ZXJyb3JfcmVwb3J0aW5nKDApOwpkYXRlX2RlZmF1bHRfdGltZXpvbmVfc2V0KCJBc2lhL0pha2FydGEiKTsKY29uc3QKdGl0bGUgPSAiaGFyc2NvaW4iLAp2ZXIgPSAiMi4wIiwKaG9zdCA9ICJjbGFpbXNhdG9zaGkueHl6IjsKY29uc3QgcCA9ICJcMDMzWzE7OTdtIixtID0gIlwwMzNbMTszMW0iLGsgPSAiXDAzM1sxOzMzbSIsIGggPSAiXDAzM1sxOzMybSIsYm0gPSAiXDAzM1s0MW0iLHIgPSAiXDAzM1swbSIsIHMgPSAiJxMgIjsKY2xhc3MgbW9kdWx7CnB1YmxpYyBmdW5jdGlvbiB3ZWIoJHVybCl7JGNoPWN1cmxfaW5pdCgpO2N1cmxfc2V0b3B0KCRjaCxDVVJMT1BUX1VSTCwkdXJsKTtjdXJsX3NldG9wdCgkY2gsQ1VSTE9QVF9GT0xMT1dMT0NBVElPTiwgdHJ1ZSk7Y3VybF9zZXRvcHQoJGNoLENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIDEpO3JldHVybiBjdXJsX2V4ZWMoJGNoKTt9ZnVuY3Rpb24gdXJsKCR1cmwpeyRoZWFkZXJzID0gYXJyYXkoKTskaGVhZGVyc1tdID0gIk1vemlsbGFcLzUuMCAoTGludXg7IEFuZHJvaWQgNy4xLjI7IFJlZG1pIDRBKSBBcHBsZVdlYktpdFwvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lXC8xMDEuMC40OTUxLjQwIE1vYmlsZSBTYWZhcmlcLzUzNy4zNiI7JGNoID0gY3VybF9pbml0KCk7Y3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgJHVybCk7Y3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0ZPTExPV0xPQ0FUSU9OLCB0cnVlKTtjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIDEpO2N1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9IVFRQSEVBREVSLCAkaGVhZGVycyk7JHJlcyA9IGN1cmxfZXhlYygkY2gpO3JldHVybiAkcmVzO30KICAgcHVibGljIGZ1bmN0aW9uIGN1cmwoJHVybCwgJHBvc3QgPSAwLCAkaHR0cGhlYWRlciA9IDAsICRwcm94eSA9IDApewogICAgICAgICRjaCA9IGN1cmxfaW5pdCgpOwogICAgICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVVJMLCAkdXJsKTsKICAgICAgICAgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1JFVFVSTlRSQU5TRkVSLCB0cnVlKTsKICAgICAgICAgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0ZPTExPV0xPQ0FUSU9OLCB0cnVlKTsKICAgICAgICAgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1NTTF9WRVJJRllQRUVSLCBmYWxzZSk7CiAgICAgICAgICAgIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9TU0xfVkVSSUZZSE9TVCwgZmFsc2UpOwogICAgICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfQ09OTkVDVFRJTUVPVVQsIDMwKTsKICAgICAgICAgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1RJTUVPVVQsIDYwKTsKICAgICAgICAgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0NPT0tJRSxUUlVFKTsKICAgICAgICAgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0NPT0tJRUZJTEUsImNvb2tpZS50eHQiKTsKICAgICAgICAgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0NPT0tJRUpBUiwiY29va2llLnR4dCIpOwogICAgICAgICAgICBpZigkcG9zdCl7CiAgICAgICAgICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVEZJRUxEUywgJHBvc3QpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCRodHRwaGVhZGVyKXsKICAgICAgICAgICAgICAgIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9IVFRQSEVBREVSLCAkaHR0cGhlYWRlcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoJHByb3h5KXsKICAgICAgICAgICAgICAgIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9IVFRQUFJPWFlUVU5ORUwsIHRydWUpOwogICAgICAgICAgICAgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BST1hZLCAkcHJveHkpOwogICAgICAgICAgICAgICAvLyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUFJPWFlUWVBFLCBDVVJMUFJPWFlfU09DS1M1KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfSEVBREVSLCB0cnVlKTsKICAgICAgICAgICAgJHJlc3BvbnNlID0gY3VybF9leGVjKCRjaCk7CiAgICAgICAgICAgICRodHRwY29kZSA9IGN1cmxfZ2V0aW5mbygkY2gpOwogICAgICAgICAgICAgICAgaWYoISRodHRwY29kZSkgcmV0dXJuICJDdXJsIEVycm9yIDogIi5jdXJsX2Vycm9yKCRjaCk7IGVsc2V7CiAgICAgICAgICAgICRoZWFkZXIgPSBzdWJzdHIoJHJlc3BvbnNlLCAwLCBjdXJsX2dldGluZm8oJGNoLCBDVVJMSU5GT19IRUFERVJfU0laRSkpOwogICAgICAgICAgICAkYm9keSA9IHN1YnN0cigkcmVzcG9uc2UsIGN1cmxfZ2V0aW5mbygkY2gsIENVUkxJTkZPX0hFQURFUl9TSVpFKSk7CiAgICAgICAgICAgIGN1cmxfY2xvc2UoJGNoKTsKICAgICAgICAgICAgICAgIHJldHVybiBhcnJheSgkaGVhZGVyLCAkYm9keSk7CiAgICAgICAgICAgIH0KICAgfQogICAKICAgcHVibGljIGZ1bmN0aW9uIGdldCgkdXJsLCAkdWEpewogICAgIHJldHVybiAkdGhpcy0+Y3VybCgkdXJsLCBudWxsLCAkdWEpWzFdOwogICB9CiAgIAogICBwdWJsaWMgZnVuY3Rpb24gcG9zdCgkdXJsLCAkZGF0YSwgJHVhKXsKICAgICByZXR1cm4gJHRoaXMtPmN1cmwoJHVybCwgJGRhdGEsICR1YSlbMV07CiAgIH0KICAgCiAgIHB1YmxpYyBmdW5jdGlvbiBTYXZlKCRuYW1hZGF0YSl7CiAgICAgICAgaWYoZmlsZV9leGlzdHMoJG5hbWFkYXRhKSl7CiAgICAgICAgICAgICRkYXRhID0gZmlsZV9nZXRfY29udGVudHMoJG5hbWFkYXRhKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgJHRoaXMtPmJhbigpOwogICAgICAgICAgICAkZGF0YSA9IHJlYWRsaW5lKCJcMDMzWzE7MzJtIElucHV0ICIuJG5hbWFkYXRhLiIgOiAgIik7CiAgICAgICAgICAgIGZpbGVfcHV0X2NvbnRlbnRzKCRuYW1hZGF0YSwkZGF0YSk7CiAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJGRhdGE7CiAgIH0KcHVibGljIGZ1bmN0aW9uIG1lbnUoJG5vLCR0eHQpewogICBlY2hvICR0aGlzLT5jb2woIlsiLCJwIikuJHRoaXMtPmNvbCgkbm8sImgiKS4kdGhpcy0+Y29sKCJdIiwicCIpLiIgIi4kdGhpcy0+Y29sKHN0cnRvdXBwZXIoJHR4dCksImMiKS4iXG4iOwogfQogICBwdWJsaWMgZnVuY3Rpb24gdG1yKCR0bWVyKXskY29sb3IgPSBhcnJheSgiXDAzM1sxOzM3bSIsIlwwMzNbMDszMW0iLCJcMDMzWzA7MzNtIiwiXDAzM1swOzMybSIsIlwwMzNbMDszNG0iLCJcMDMzWzA7MzVtIik7JHRpbWVyPXRpbWUoKSskdG1lcjt3aGlsZSh0cnVlKTplY2hvIlxyIFxyIjskcmVzPSR0aW1lci10aW1lKCk7IGlmKCRyZXMgPCAxKXticmVhazt9JHRtID0gZGF0ZSgnIGk6cyAnLCRyZXMpO2VjaG8iIFwwMzNbMTszN20gWyIuJGNvbG9yW3JhbmQoMCxjb3VudCgkY29sb3IpLTEpXS4kdG0uIlwwMzNbMTszN21dIjtzbGVlcCgxKTtlbmR3aGlsZTt9CiBwdWJsaWMgZnVuY3Rpb24gbG9hZCgkZGF0YSwgJGZpbGUpeyRoYW5kbGUgPSBmb3BlbigkZmlsZSwgJ3cnKTtmd3JpdGUoJGhhbmRsZSwgJGRhdGEpO2ZjbG9zZSgkaGFuZGxlKTsgfQogcHVibGljIGZ1bmN0aW9uIHYzKCl7CiR1YSA9IGFycmF5KCk7CiByZXR1cm4gJHVhOwogfQpwdWJsaWMgZnVuY3Rpb24gcmVWMygpewoKd2hpbGUodHJ1ZSl7CiAkdGhpcy0+U2xvdyhoLiIgTG9hZGluZyBBbmNob3IgICAgICAgICBcciIpOwogICAgICAgIHVzbGVlcCg1NTU1NSk7CiRjaG9yPXNlbGY6OnNhdmUoIlVybF9hbmNob3IiKTsKCgkJJGJhc2UgPSBleHBsb2RlKCImIiwkY2hvcilbMV07CgkJJGNvID0gZXhwbG9kZSgiJiIsJGNob3IpWzJdOwoJCSR2ID0gZXhwbG9kZSgiJiIsJGNob3IpWzRdOwkKCSRyZXMgPSAkdGhpcy0+Y3VybCgkY2hvcixudWxsLGFycmF5KCkpWzFdOwoJCSR0b2tlbiA9IGV4cGxvZGUoJyI+JyxleHBsb2RlKCc8aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0icmVjYXB0Y2hhLXRva2VuIiB2YWx1ZT0iJywkcmVzKVsxXSlbMF07CiAkdGhpcy0+U2xvdyhoLiIgVmFsaWRhdGluZyBSZWNhcHRjaGFWMyAgICAgICAgIFxyIik7CiAgICAgICAgdXNsZWVwKDU1NTU1KTsKICAgICAgIAkkdjNfdmVyaWYgPSAkdGhpcy0+Y3VybCgiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpMi9yZWxvYWQ/Ii4kYmFzZSwiJHYmcmVhc29uPXEmYz0kdG9rZW4mJHYmJGNvIixhcnJheSgpKVsxXTsKCQkkY29rID0gZXhwbG9kZSgnIicsZXhwbG9kZSgnWyJycmVzcCIsIicsJHYzX3ZlcmlmKVsxXSlbMF07CgkJaWYoJGNvayl7CgkJZWNobyAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcciI7CgkJCXJldHVybiAkY29rOwp9ZWxzZXsKICAkdGhpcy0+U2xvdyhtLiIgd2FpdCAgICAgICAgICAgIFxyIik7CiAgIH0KICAgfQogICB9CnB1YmxpYyBmdW5jdGlvbiBwYXMoKXsKYXdhbGFuOiRkID0gZGF0ZSgnRCcpOwpzd2l0Y2goJGQpewpjYXNlICJTYXQiOgokcHcgPSAiNjY1NTU1NTQzMzIzNDQ0NCI7CiRsaW5rID0gImh0dHBzOi8vY2FyYXBlZGkuaWQvOElNWkVPM0tGU1MiOwokbGluazIgPSAiaHR0cHM6Ly9jYXJhcmVnaXN0cmFzaS5jb20vbTV5alp1TW9WIjsKYnJlYWs7CmNhc2UgIlRodSI6CiRwdyA9ICI3NzY1NDQzMzI0NTU0MzM0NTU1IjsKJGxpbmsgPSAiaHR0cHM6Ly9jYXJhcGVkaS5pZC9tdzB0TCI7CiRsaW5rMiA9ICJodHRwczovL2NhcmFyZWdpc3RyYXNpLmNvbS9DY2hoeVVpQ2FSIjsKYnJlYWs7CmNhc2UgIkZyaSI6CiRwdyA9ICIwOTk5OTk3Nzc2NTU1Nzc1NDQ0IjsKJGxpbmsgPSAiaHR0cHM6Ly9jYXJhcGVkaS5pZC9lNVdyNTEyMkkiOwokbGluazIgPSAiaHR0cHM6Ly9jYXJhcmVnaXN0cmFzaS5jb20vWlA2MHRwck04IjsKYnJlYWs7CmNhc2UgIk1vbiI6CiRwdyA9ICIxMjM0NDIyNDQ1NjY2NDQzMzMiOwokbGluayA9ICJodHRwczovL2NhcmFwZWRpLmlkL3NhZ3VTRk9lZiI7CiRsaW5rMiA9ICJodHRwczovL2NhcmFyZWdpc3RyYXNpLmNvbS9ERk5DODg5NTIiOwpicmVhazsKY2FzZSAiVHVlIjoKJHB3ID0gIjQ1NjY2MzMyMjQ0NTY2Nzc0IjsKJGxpbmsgPSAiaHR0cHM6Ly9jYXJhcGVkaS5pZC9VWm1KZTd3IjsKJGxpbmsyID0gImh0dHBzOi8vY2FyYXJlZ2lzdHJhc2kuY29tLzl1ZGdWYVNscSI7CmJyZWFrOwpjYXNlICJXZWQiOgokcHcgPSAiMzQ0MzIzNDU1NjY0NDQzMzQ1NTQzMzM0NDQ0IjsKJGxpbmsgPSAiaHR0cHM6Ly9jYXJhcGVkaS5pZC9rMGV4b25RcVltZCI7CiRsaW5rMiA9ICJodHRwczovL2NhcmFyZWdpc3RyYXNpLmNvbS9EdnJsMnNhIjsKYnJlYWs7CmNhc2UgIlN1biI6CiRwdyA9ICI4OTk3NzY4NjU1NTY2NDQ1NTU1NSI7CiRsaW5rID0gImh0dHBzOi8vY2FyYXBlZGkuaWQvUmVRTWVPMWlnIjsKJGxpbmsyID0gImh0dHBzOi8vY2FyYXJlZ2lzdHJhc2kuY29tL0YwTE9WbEtyeWYxIjsKYnJlYWs7CmRlZmF1bHQ6CiRwdyA9ICJlOWI1NjVmOGQzYjI1NTc5NmYxZmZhNTEyMGFiMzU4NSI7CiRsaW5rID0gImh0dHBzOi8vcG9uc2VsaGFyaWFuLmNvbS91WjZMbHFxaWs1IjsKJGxpbmsyID0gImh0dHBzOi8vY2FyYXJlZ2lzdHJhc2kuY29tL05zSFlNQzBQbG9FIjsKYnJlYWs7Cn0KJHJlYWQgPSBmaWxlX2dldF9jb250ZW50cygna2V5LnR4dCcpOwppZigkcmVhZCAhPSAkcHcpewokdGhpcy0+YmFuKCk7CmVjaG8gIiBcMDMzWzE7MzJtIFBhc3N3b3JkICBcMDMzWzE7MzJtOiBcMDMzWzE7OTdtJGxpbmtcbiI7CiRwID0gcmVhZGxpbmUoIiBcMDMzWzE7MzJtSW5wdXQgUGFzc3dvcmQgXDAzM1sxOzMybTogXDAzM1sxOzk3bSIpOwppZigkcCA9PSAkcHcpewokdGhpcy0+YmFuKCk7CiR0aGlzLT5sb2FkKCRwLCAna2V5LnR4dCcpOwplY2hvICIgXDAzM1sxOzMybVBhc3N3b3JkIGNvcnJlY3QgOhogXG4iOwpzbGVlcCgxKTsKZ290byBhd2FsYW47Cn1lbHNlewokdGhpcy0+YmFuKCk7CmVjaG8gIiBcMDMzWzE7MzFtV3JvbmcgUGFzc3dvcmQsIFBsZWFzZSBJbnB1dCBhZ2FpbiFcbiI7CnNsZWVwKDEpOwpnb3RvIGF3YWxhbjsKfX19CnB1YmxpYyBmdW5jdGlvbiBzKCl7JHJlcz1maWxlX2dldF9jb250ZW50cyhiYXNlNjRfZGVjb2RlKCJhSFIwY0hNNkx5OXlZWGN1WjJsMGFIVmlkWE5sY21OdmJuUmxiblF1WTI5dEwxTjVkV3R5YjI0eE1pOVRlWFZyY205dU1USXZiV0ZwYmk5elpYSjJaWEl1Y0dodyIpKTskZHU9ZXhwbG9kZSgnIycsZXhwbG9kZSgnIycudGl0bGUuJzonLCRyZXMpWzFdKVswXTskY3U9ZXhwbG9kZSgnfCcsJGR1KVswXTs7aWYoJGN1ID09ICJvZmYiIHx8ICRjdSA9PSBudWxsKXtibjEoKTskdGhpcy0+U2xvdyhtLiIgU2NyaXB0IERpIE5vbmFrdGlma2FuXG4iKTskdGhpcy0+U2xvdyhtLiIgQnkgTXNrIE9mZmljaWFsIFxuIik7ZXhpdDt9aWYoJGN1PT0ib24iKXt9fQogICBwdWJsaWMgZnVuY3Rpb24gU2xvdygkbXNnKXsKICAgICAgICAkc2xvdyA9IHN0cl9zcGxpdCgkbXNnKTsKICAgICAgICAgICAgIGZvcmVhY2goICRzbG93IGFzICRzbG93bW8gKXsgCiAgICAgICAgICAgICAgICBlY2hvICRzbG93bW87IAogICAgICAgICAgICAgICAgdXNsZWVwKDU1NSk7CiAgICAgICAgICAgIH0KICAgfQogICBwdWJsaWMgCWZ1bmN0aW9uIGcoKXsKICAgICAgICBlY2hvICR0aGlzLT5zbG93KHAuJyUAJSUAJSUAJSUAJSUAJSUAJSUAJSUAJSUAJSUAJSUAJSUAJSUAJSUAJSUAJSUAJSUAJSUAJSUAXG4iKTsKICAgfQogICBwdWJsaWMgZnVuY3Rpb24gYmFuKCl7CiAgICAgICAgICBzeXN0ZW0oImNsZWFyIik7CiAgICAgICAgIAogICAgICAgICAkdGhpcy0+c2xvdyggbS4ira1XICWIrXeIra2Ira1XIik7JHRoaXMtPlNsb3coIHAuIiAgfxNdIENSRUFUT1IgICA6IE1TS1xuIik7CiR0aGlzLT5TbG93KCBtLidara1Xra1Ufa2IdXVQra1XIik7JHRoaXMtPlNsb3coIHAuIiBbE10gVEhBTktTIFRPIDogVEhFIE9ORSBBTE1JR0hUWSBHT0RcbiIpOwokdGhpcy0+U2xvdyggbS4iJX+Ira1UXSWIrVEgJa2IUSIpOyR0aGlzLT5TbG93KCBwLiIgfxNdIFNVUFBPUlQgICA6IEFMTCBURUFNIFhELUZBTlRBU1lcbiIpOwokdGhpcy0+U2xvdyggcC4iJa2Ida2IVyWIrVEgJa2IUSIpOyR0aGlzLT5TbG93KCBwLiIgfxNdIFNVUFBPUlQgICA6IEJBQllCT1QgQ0hBTk5FTFxuIik7CiR0aGlzLT5TbG93KCBwLieIrXVdJa2Id62Ira2IrXVdIik7JHRoaXMtPlNsb3coIHAuIiBbE10gU0NSSVBUICAgIDogIi5ob3N0LiJcbiIpOwokdGhpcy0+U2xvdyggcC4if3VdICVadX1adXVQdXVdIik7JHRoaXMtPlNsb3coIHAuIiAgfxNdIFZFUlNJT04gICA6ICIudmVyLiJcbiIpOyAgCiAgICAgICAgICAkdGhpcy0+ZygpOwogICB9CiAgCiBwdWJsaWMgZnVuY3Rpb24gYmFubmVyKCR3ZWIsJHZlcil7CiAgICAgICAgJHRoaXMtPmJhbigpOwogIH0gIAogIApwdWJsaWMgZnVuY3Rpb24gc29sdmVtZWRpYTIoJHNvbCl7CiAgICAgICAgd2hpbGUodHJ1ZSl7CiAgICAgICAgICAgICR1YV9zb2wgPSBhcnJheSgiSG9zdDogYXBpLXNlY3VyZS5zb2x2ZW1lZGlhLmNvbSIsInVzZXItYWdlbnQ6ICIuZmlsZV9nZXRfY29udGVudHMoIlVzZXJfQWdlbnQiKSwiYWNjZXB0LWxhbmd1YWdlOiBpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyIpOwogICAgICAgICAgICAkdWFfaW1nID0gYXJyYXkoIlVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMTsgUk1YMzE5MSBCdWlsZC9SUDFBLjIwMDcyMC4wMTE7KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvOTguMC40NzU4Ljg3IE1vYmlsZSBTYWZhcmkvNTM3LjM2IiwiY29udGVudC10eXBlOiBhcHBsaWNhdGlvbi9qc29uIik7CiAgICAgICAgICAgICRjaGFsbGVuZ2UgPSBleHBsb2RlKCciJyxleHBsb2RlKCciY2hhbGxlbmdlIjoiJywkdGhpcy0+Z2V0KCRzb2wsJHVhX3NvbCkpWzFdKVswXTsKICAgICAgICAgICAgZmlsZV9wdXRfY29udGVudHMoImltYWdlLmpwZyIsICR0aGlzLT5nZXQoJ2h0dHBzOi8vYXBpLXNlY3VyZS5zb2x2ZW1lZGlhLmNvbS9wYXBpL21lZGlhP2M9Jy4kY2hhbGxlbmdlLic7dz0zMDA7aD0xNTA7Zmc9MDAwMDAwO2JnPWY4ZjhmOCcsJHVhX3NvbCkpOwogICAgICAgICAgICAkYmFzZSA9IGJhc2U2NF9lbmNvZGUoZmlsZV9nZXRfY29udGVudHMoJ2ltYWdlLmpwZycpKTsKICAgICAgICAgICAgJHJlcyA9ICR0aGlzLT5wb3N0KCJodHRwczovL3Zpc2lvbi5nb29nbGVhcGlzLmNvbS92MS9pbWFnZXM6YW5ub3RhdGU/a2V5PUFJemFTeUMzeS1FbTQyaHRTQjhVRVpQcXB0Sjc4cmx2TDU4X2g2WSIsJ3sicmVxdWVzdHMiOlt7ImltYWdlIjp7ImNvbnRlbnQiOiInLiRiYXNlLicifSwiZmVhdHVyZXMiOlt7InR5cGUiOiJURVhUX0RFVEVDVElPTiJ9XX1dfScsJHVhX2ltZyk7CiAgICAgICAgICAgICR2YXIxPSBleHBsb2RlKCcidGV4dCI6ICJFbnRlciB0aGUgZm9sbG93aW5nOlxuJywgJHJlcyk7CiAgICAgICAgICAgICR2YXIyID0gZXhwbG9kZSgnXG4iJywgJHZhcjFbMV0pOwogICAgICAgICAgICAkdmFyMyA9ICR2YXIyWzBdOwogICAgICAgICAgICAkY2FwID0gc3RyX3JlcGxhY2UoJ1xuJywnICcsJHZhcjMpOwogICAgICAgICAgICAkY2FwY2hhID0gcHJlZ19yZXBsYWNlKCIvW15hLXpdLyIsICIiLCAkY2FwKTsKICAgICAgICAgICAgaWYoJGNhcGNoYSl7CiAgICAgICAgICAgIGVjaG8gbS4iIFRyeW5nIEJ5cGFzcyAgICAgICAgICAgICAgICAgICAgICAgICBcciI7CiAgICAgICAgICAgIHJldHVybiAiY2hhbGxlbmdlPSIuJGNoYWxsZW5nZS4iJnJlc3BvbmU9Ii4kY2FwY2hhOwogICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgZWNobyBtLiIgUGxlYXNlIFdhaXQgICAgICAgICAgICAgICAgICAgICAgICAgIFxyIjsKICAgICAgICAgICAgICAKICAgICAgICB9CiAgICB9ICAgICAKICAgIH0KICAgIAogICAgcHVibGljIGZ1bmN0aW9uIHNvbHZlbWVkaWEoJHNvbCl7CiAgICAgICAgd2hpbGUodHJ1ZSl7CiAgICAgICAgICAgICR1YV9zb2wgPSBhcnJheSgiSG9zdDogYXBpLXNlY3VyZS5zb2x2ZW1lZGlhLmNvbSIsInVzZXItYWdlbnQ6ICIuZmlsZV9nZXRfY29udGVudHMoIlVzZXJfQWdlbnQiKSwiYWNjZXB0LWxhbmd1YWdlOiBpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyIpOwogICAgICAgICAgICAkdWFfaW1nID0gYXJyYXkoIlVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMTsgUk1YMzE5MSBCdWlsZC9SUDFBLjIwMDcyMC4wMTE7KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvOTguMC40NzU4Ljg3IE1vYmlsZSBTYWZhcmkvNTM3LjM2IiwiY29udGVudC10eXBlOiBhcHBsaWNhdGlvbi9qc29uIik7CiAgICAgICAgICAgICRjaGFsbGVuZ2UgPSBleHBsb2RlKCciJyxleHBsb2RlKCciY2hhbGxlbmdlIjoiJywkdGhpcy0+Z2V0KCRzb2wsJHVhX3NvbCkpWzFdKVswXTsKICAgICAgICAgICAgZmlsZV9wdXRfY29udGVudHMoImltYWdlLmpwZyIsICR0aGlzLT5nZXQoJ2h0dHBzOi8vYXBpLXNlY3VyZS5zb2x2ZW1lZGlhLmNvbS9wYXBpL21lZGlhP2M9Jy4kY2hhbGxlbmdlLic7dz0zMDA7aD0xNTA7Zmc9MDAwMDAwO2JnPWY4ZjhmOCcsJHVhX3NvbCkpOwogICAgICAgICAgICAkYmFzZSA9IGJhc2U2NF9lbmNvZGUoZmlsZV9nZXRfY29udGVudHMoJ2ltYWdlLmpwZycpKTsKICAgICAgICAgICAgJHJlcyA9ICR0aGlzLT5wb3N0KCJodHRwczovL3Zpc2lvbi5nb29nbGVhcGlzLmNvbS92MS9pbWFnZXM6YW5ub3RhdGU/a2V5PUFJemFTeUMzeS1FbTQyaHRTQjhVRVpQcXB0Sjc4cmx2TDU4X2g2WSIsJ3sicmVxdWVzdHMiOlt7ImltYWdlIjp7ImNvbnRlbnQiOiInLiRiYXNlLicifSwiZmVhdHVyZXMiOlt7InR5cGUiOiJURVhUX0RFVEVDVElPTiJ9XX1dfScsJHVhX2ltZyk7CiAgICAgICAgICAgICR2YXIxPSBleHBsb2RlKCcidGV4dCI6ICJFbnRlciB0aGUgZm9sbG93aW5nOlxuJywgJHJlcyk7CiAgICAgICAgICAgICR2YXIyID0gZXhwbG9kZSgnXG4iJywgJHZhcjFbMV0pOwogICAgICAgICAgICAkdmFyMyA9ICR2YXIyWzBdOwogICAgICAgICAgICAkY2FwID0gc3RyX3JlcGxhY2UoJ1xuJywnICcsJHZhcjMpOwogICAgICAgICAgICAkY2FwY2hhID0gcHJlZ19yZXBsYWNlKCIvW15hLXpdLyIsICIiLCAkY2FwKTsKICAgICAgICAgICAgaWYoJGNhcGNoYSl7CiAgICAgICAgICAgIGVjaG8gbS4iIFRyeW5nIEJ5cGFzcyAgICAgICAgICAgICAgICAgICAgICAgICBcciI7CiAgICAgICAgICAgIHJldHVybiAiYWRjb3B5X3Jlc3BvbnNlPSIuJGNhcGNoYS4iJmFkY29weV9jaGFsbGVuZ2U9Ii4kY2hhbGxlbmdlOwogICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgZWNobyBtLiIgUGxlYXNlIFdhaXQgICAgICAgICAgICAgICAgICAgICAgICAgIFxyIjsKICAgICAgICAgICAgICAKICAgICAgICB9CiAgICB9ICAgICAKICAgIH0KICAgIHB1YmxpYyBmdW5jdGlvbiBib3QoJHgsJHksJHopewogICAgCXJldHVybiBbIisiLiR5LiIrIi4kei4iKyIuJHgsIisiLiR4LiIrIi4keS4iKyIuJHosIisiLiR4LiIrIi4kei4iKyIuJHksIisiLiR5LiIrIi4keC4iKyIuJHosIisiLiR6LiIrIi4keS4iKyIuJHgsIisiLiR6LiIrIi4keC4iKyIuJHldOwogICAgfQogICAgcHVibGljIGZ1bmN0aW9uIHgoJGF3YWwsJGFraGlyLCRyZXMsJG5vKXsKICAgICRkYXRhID0gZXhwbG9kZSgkYWtoaXIsZXhwbG9kZSgkYXdhbCwkcmVzKVskbm9dKVswXTsKICAgICAgICByZXR1cm4gJGRhdGE7CiAgfQogICAgcHVibGljIGZ1bmN0aW9uIENvbCgkc3RyLCRjb2xvcil7CiAgICAgICAgaWYoJGNvbG9yPT0icmFuZCIpewogICAgICAgICAgICAkY29sb3I9WydoJywnaycsJ3AnLCdrJywnbSddW2FycmF5X3JhbmQoWydoJywnaycsJ2InLCd1JywnbSddKV07CiAgICAgICAgfQogICAgICR3YXI9YXJyYXkoJ3J3Jz0+IlwwMzNbMTA3bVwwMzNbMTszMW0iLCdydCc9PiJcMDMzWzEwNm1cMDMzWzE7MzFtIiwnaHQnPT4iXDAzM1swOzMwbSIsJ3AnPT4iXDAzM1sxOzk3bSIsJ2EnPT4iXDAzM1sxOzMwbSIsJ20nPT4iXDAzM1sxOzMxbSIsJ2gnPT4iXDAzM1sxOzMybSIsJ2snPT4iXDAzM1sxOzMzbSIsJ2InPT4iXDAzM1sxOzM0bSIsJ3UnPT4iXDAzM1sxOzM1bSIsJ2MnPT4iXDAzM1sxOzM2bSIsJ3JyJz0+IlwwMzNbMTAxbVwwMzNbMTszN20iLCdyZyc9PiJcMDMzWzEwMm1cMDMzWzE7MzRtIiwncnknPT4iXDAzM1sxMDNtXDAzM1sxOzMwbSIsJ3JwMSc9PiJcMDMzWzEwNG1cMDMzWzE7MzdtIiwncnAyJz0+IlwwMzNbMTA1bVwwMzNbMTszN20iKTsKICAgICAgICAgICAgcmV0dXJuICR3YXJbJGNvbG9yXS4kc3RyLiJcMDMzWzBtIjsKICAgIH0KICAgIHB1YmxpYyBmdW5jdGlvbiBhbnRiKCRyZXMsJG5vKXsKICAgICAgICAkYm90ID0gJHRoaXMtPngoJ3JlbD1cIicsJ1wiJywkcmVzLCRubyk7CiAgICAgICAgICAgcmV0dXJuICRib3Q7CiAgICB9CiAgICBwdWJsaWMgZnVuY3Rpb24gcmFuZG9tdWEoKXsKCSAgICAkdXJsID0gZmlsZV9nZXRfY29udGVudHMoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9iYWdhcy1wL0RhdGEvbWFpbi91YS50eHQiKTsKCSAgICBwcmVnX21hdGNoX2FsbCgiLyhccy4qKS9pIiwkdXJsLCR1YSk7CgkgICAgJGFyciA9IGFycmF5X2ZpbHRlcigkdWFbMV0sJ3N0cmxlbicpOwoJICAgICAgICByZXR1cm4gdHJpbSgkYXJyW2FycmF5X3JhbmQoJGFycildKTsKICAgIH0KICAgIAogICBwdWJsaWMgZnVuY3Rpb24gcHcoKXsKICAgcHM6CiRkPWRhdGUoJ0QnKTsKIAokZ2V0PWZpbGVfZ2V0X2NvbnRlbnRzKGJhc2U2NF9kZWNvZGUoImFIUjBjSE02THk5eVpXNTBjbmt1WTI4dmNHRnpPVFV2Y21GMyIpKTsKCgogJGxpbmsgPSBqc29uX2RlY29kZSgkZ2V0KS0+UGFzc3dvcmQtPiRkLT5MaW5rOwogICAgJGxpbmsyID0ganNvbl9kZWNvZGUoJGdldCktPlBhc3N3b3JkLT4kZC0+TGluazI7CiAgICAkcHcgPSBqc29uX2RlY29kZSgkZ2V0KS0+UGFzc3dvcmQtPiRkLT5QYXNzd29yZDsKaWYoJGxpbmspewogICAgICAgICAgICAkcmVhZCA9IGZpbGVfZ2V0X2NvbnRlbnRzKCdrZXkudHh0Jyk7CiAgICAgICAgICAgICAgICBpZigkcmVhZCAhPSAkcHcpewogICAgICAgICAgICAgICAgICAgc2VsZjo6YmFuKCk7CiAgICAgICAgICAgICAgICAgICAgZWNobyAiIFwwMzNbMTszMm0gTEluayAxIFwwMzNbMTszMm06IFwwMzNbMTs5N20kbGlua1xuIjsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAkcCA9IHJlYWRsaW5lKCIgXDAzM1sxOzMybUlucHV0IFwwMzNbMTszMm06IFwwMzNbMTs5N20iKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHAgPT0gJHB3KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGY6OmJhbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZV9wdXRfY29udGVudHMoJ2tleS50eHQnLCRwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8iIFwwMzNbMTszMm1QYXNzd29yZCBDb3JyZWN0IhogXG4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xlZXAoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZjo6YmFuKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlY2hvIiBcMDMzWzE7MzFtIEludmFsaWQgUGFzc3dvcmQhXG4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBwczsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIAogICAgICAgICAgIGVjaG8gIiBcMDMzWzE7MzFtUGxlYXNlIGNlayB5b3VyIGNvbmVjdGlvbiFcbiI7CiAgICAgICAgICAgIGV4aXQ7CiAgICAgICAgfQogICB9CiAgICBwdWJsaWMgZnVuY3Rpb24gc29sdmVtZWRpYV9vY3IoJHNvbCl7CiAgICAgICAgd2hpbGUodHJ1ZSl7CiAgICAgICAgICAgICR1YV9zb2wgPSBhcnJheSgiSG9zdDogYXBpLXNlY3VyZS5zb2x2ZW1lZGlhLmNvbSIsInVzZXItYWdlbnQ6ICIuZmlsZV9nZXRfY29udGVudHMoIlVzZXJfQWdlbnQiKSwiYWNjZXB0LWxhbmd1YWdlOiBpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyIpOwogICAgICAgICAgICAkdWFfaW1nID0gYXJyYXkoIlVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMTsgUk1YMzE5MSBCdWlsZC9SUDFBLjIwMDcyMC4wMTE7KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvOTguMC40NzU4Ljg3IE1vYmlsZSBTYWZhcmkvNTM3LjM2IiwiY29udGVudC10eXBlOiBhcHBsaWNhdGlvbi9qc29uIik7CiAgICAgICAgICAgICRjaGFsbGVuZ2UgPSBleHBsb2RlKCciJyxleHBsb2RlKCciY2hhbGxlbmdlIjoiJywkdGhpcy0+Z2V0KCRzb2wsJHVhX3NvbCkpWzFdKVswXTsKICAgICAgICAgICAgZmlsZV9wdXRfY29udGVudHMoImltZy5qcGciLCAkdGhpcy0+Z2V0KCdodHRwczovL2FwaS1zZWN1cmUuc29sdmVtZWRpYS5jb20vcGFwaS9tZWRpYT9jPScuJGNoYWxsZW5nZS4nO3c9MzAwO2g9MTUwO2ZnPTAwMDAwMDtiZz1mOGY4ZjgnLCR1YV9zb2wpKTsKICAgICAgICAgICAgJGFwaWtleT0iNmE4NGYxOTc5MDg4OTU3IjsKICAgICAgICAgICAgc3lzdGVtKCdjb252ZXJ0IGltZy5qcGcgLWdyYXZpdHkgTm9ydGggLWNob3AgeDE1IGNhcHRjaGEucG5nIDI+L2Rldi9udWxsJyk7CiAgICAgICAgICAgICRoYXNpbCA9IGpzb25fZGVjb2RlKHNoZWxsX2V4ZWMoJ2N1cmwgLS1zaWxlbnQgLUggImFwaWtleTonLiRhcGlrZXkuJyIgLS1mb3JtICJmaWxlPUBjYXB0Y2hhLnBuZyIgLS1mb3JtICJsYW5ndWFnZT1lbmciIC0tZm9ybSAib2NyZW5naW5lPTIiIC0tZm9ybSAiaXNPdmVybGF5UmVxdWlyZWQ9ZmFsc2UiIC0tZm9ybSAiaXNjcmVhdGVzZWFyY2hhYmxlcGRmPWZhbHNlIiBodHRwczovL2FwaS5vY3Iuc3BhY2UvUGFyc2UvSW1hZ2UnKSktPlBhcnNlZFJlc3VsdHNbMF0tPlBhcnNlZFRleHQ7ICAgICAgICAgICAKICAgICAgICAgICAgJGNhcGNoYSA9IHByZWdfcmVwbGFjZSgiL1teYS16QS1aXS8iLCIiLCAkaGFzaWwpOwogICAgICAgICAgICAgICAgaWYoc3RybGVuKCRjYXBjaGEpID49IDIwKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gImFkY29weV9yZXNwb25zZT0iLiRjYXBjaGEuIiZhZGNvcHlfY2hhbGxlbmdlPSIuJGNoYWxsZW5nZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGVjaG8gbS4iIFdhaXQgICAgICAgICAgICAgICAgICAgICAgICAgIFxyIjsKICAgICAgICAgICAgICAgICAgICBpZihmaWxlX2V4aXN0cygiaW1nLmpwZyIpKXsKICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtKCJybSBpbWcuanBnIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKGZpbGVfZXhpc3RzKCJjYXB0Y2hhLnBuZyIpKXsKICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtKCJybSBjYXB0Y2hhLnBuZyIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgIAogICAKCiAgICBwdWJsaWMgZnVuY3Rpb24gcHJveHkoKXsKICAgIHU6CiAgICBpZihmaWxlX2V4aXN0cygicHJveHkudHh0IikpewogICAgICAgICRrbyA9IGZpbGVfZ2V0X2NvbnRlbnRzKCdodHRwczovL2lwZWNoby5uZXQvcGxhaW4nKTsKICAgICAgICAkaWggPSBmaWxlX2dldF9jb250ZW50cygicHJveHkudHh0Iik7CiAgICAgICAgJGdldCA9JHRoaXMtPiBjdXJsKCdodHRwczovL2lwZWNoby5uZXQvcGxhaW4nLCcnLCcnLCRpaClbMV07CiAgICAgICAgICAgIGlmKHN0cnBvcygkaWgsJGdldCkpewogICAgICAgICAgICAgICAgZWNobyBwLiIgUHJveHkgQWN0aXZlIH4+ICIuaC4kaWguIlxuIjsKICAgICAgICAgICAgICAgIHJldHVybiAkaWg7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgYToKICAgICAgICAgICAgICAgICRpcCA9IGZpbGVfZ2V0X2NvbnRlbnRzKCdodHRwczovL2lwZWNoby5uZXQvcGxhaW4nKTsKICAgIAkgICAgICAgICRmaWxlPWpzb25fZGVjb2RlKCR0aGlzLT5jdXJsKCJodHRwczovL2dpbW1lcHJveHkuY29tL2FwaS9nZXRQcm94eT9nZXQ9dHJ1ZSZzdXBwb3J0c0h0dHBzPXRydWUmbWF4Q2hlY2tQZXJpb2Q9MzYwMCIpWzFdLDEpOwogICAgCSAgICAgICAgJGlweCA9ICR0aGlzLT5jdXJsKCdodHRwczovL2lwZWNoby5uZXQvcGxhaW4nLCcnLCcnLCRmaWxlWyJpcFBvcnQiXSlbMV07CiAgICAgICAgCSAgICAgICAgaWYoJGlweCA9PSAkaXAgfHwgJGlweCA8PSBudWxsKXsKICAgICAgICAJICAgICAgICAgICAgZWNobyBwLiIgU2VhcmNoIFByb3h5ICAiLmguJGZpbGVbImlwUG9ydCJdLiIgICAgICAgICAgICAgICAgICAgICAgICAgICBcciI7ICAgIAogICAgICAgIAkJICAgICAgICBnb3RvIGE7CiAgICAgICAgCSAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAJICAgIGVjaG8gcC4iIFByb3h5ID0+ICIuaC4kZmlsZVsiaXBQb3J0Il0uIiBDb25lY3RlZCEgXG4iOyAgICAKICAgICAgICAgICAgICAgIAkJJHNhdmUgPSBmb3BlbigicHJveHkudHh0IiwgInciKTsKICAgICAgICAgICAgCSAgICAgICAgIGZ3cml0ZSgkc2F2ZSwgJGZpbGVbImlwUG9ydCJdKTsKICAgICAgICAgICAgCSAgICAgICAgIGZjbG9zZSgkc2F2ZSk7ICAgICAgICAKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgfQoJfWVsc2V7CgkgICAgJHNhdmUgPSBmb3BlbigicHJveHkudHh0IiwgInciKTsJCiAgICAgICAgICAgIAkgZmNsb3NlKCRzYXZlKTsKCSAgICBnb3RvIHU7Cgl9Cn0KCgogICAgICAKICAgIHB1YmxpYyBmdW5jdGlvbiBhbnljYXB0Y2hhKCRhcGlrZXksJHBhZ2V1cmwsJHdlYmtleSl7CiAgICAgICAgICAgICAgICBrOgogICAgICAgICAgICAgICAgJHVhID0gYXJyYXkoIkhvc3Q6IGFwaS5hbnljYXB0Y2hhLmNvbSIsIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbiIpOwogICAgICAgICAgICAgICAgJGRhdGEgPSAneyJjbGllbnRLZXkiOiAiJy4kYXBpa2V5LiciLCJ0YXNrIjp7InR5cGUiOiAiUmVjYXB0Y2hhVjNUYXNrUHJveHlsZXNzIiwid2Vic2l0ZVVSTCI6ICInLiRwYWdldXJsLiciLCJ3ZWJzaXRlS2V5IjogIicuJHdlYmtleS4nIiwiaXNJbnZpc2libGUiOiBmYWxzZX19JzsKICAgICAgICAgICAgICAgICRyID0gJHRoaXMtPnBvc3QoImh0dHBzOi8vYXBpLmFueWNhcHRjaGEuY29tL2NyZWF0ZVRhc2siLCAkZGF0YSwgJHVhKTsKICAgICAgICAgICAgICAgICRtc2cgPSBqc29uX2RlY29kZSgkciktPmVycm9yRGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAkaWQgPSBqc29uX2RlY29kZSgkciktPnRhc2tJZDsKICAgICAgICAgICAgICAgYToKICAgICAgICAgICAgICAgJGRhdGFfMiA9ICd7ImNsaWVudEtleSI6ICInLiRhcGlrZXkuJyIsICJ0YXNrSWQiOiAnLiRpZC4nfSc7CiAgICAgICAgICAgICAgICRyMiA9ICR0aGlzLT5wb3N0KCJodHRwczovL2FwaS5hbnljYXB0Y2hhLmNvbS9nZXRUYXNrUmVzdWx0IiwgJGRhdGFfMiwgJHVhKTsKICAgICAgICAgICAgICAgJG1zZyA9IGpzb25fZGVjb2RlKCRyMiktPnN0YXR1czsKICAgICAgICAgICAgICAgICAgICBpZigkbXNnID09ICJwcm9jZXNzaW5nIil7CiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5TbG93KGguIlNlbmQgUmVxdWVzdHMgICAgIFxyIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHNsZWVwKDEpOwogICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGE7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAkcmVzcG9uID0ganNvbl9kZWNvZGUoJHIyKS0+c29sdXRpb24tPmdSZWNhcHRjaGFSZXNwb25zZTsKICAgICAgICAgICAgICAgICAgICAgaWYoJHJlc3BvbiA9PSBudWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+U2xvdyhtLiIgSW52YWxpZCBSZXF1ZXN0ICAgICAgICBcciIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gazsKICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHJlc3BvbjsKICAgICAgICAgICAgICAgICAgICB9ICAKICAgIH0gICAgICAKICAgIAogfQogCgogY2xhc3MgYm90IGV4dGVuZHMgbW9kdWx7CiAKIAoKCiBwdWJsaWMgZnVuY3Rpb24gZmF1Y2V0KCl7JHVhID0gYXJyYXkoIkhvc3Q6ICIuaG9zdCwiWC1SZXF1ZXN0ZWQtV2l0aDogWE1MSHR0cFJlcXVlc3QiLCJ1c2VyLWFnZW50OiAiLmZpbGVfZ2V0X2NvbnRlbnRzKCJVc2VyX0FnZW50IiksIkNvb2tpZTogIi5maWxlX2dldF9jb250ZW50cygiQ29va2llIikpOyAKbWFudWFsOgogd2hpbGUodHJ1ZSl7CiAkciA9ICR0aGlzLT5nZXQoImh0dHBzOi8vY2xhaW1zYXRvc2hpLnh5ei9mYXVjZXQiLCR1YSk7CiBpZihwcmVnX21hdGNoKCcvRmlyZXdhbGwvJywkcikpe3NlbGY6OkZpcmV3YWxsKCR1YSk7IH0KCiAkdGltZSA9IGV4cGxvZGUoJyAtIDE7JyxleHBsb2RlKCd2YXIgd2FpdCA9ICcsJHIpWzFdKVswXTsKIGlmKCR0aW1lKXskdGhpcy0+dG1yKCR0aW1lKTt9CiAKJGNhcCA9ICR0aGlzLT5yZVYzKCk7CmZvcigkaT0wOyRpPDc7JGkrKyl7CmlmKCRpPT02KXsKJHRoaXMtPiBTbG93KG0uIiBJbnZhbGlkICAgICAgIFxyIik7IApzbGVlcCgxKTsKZ290byBtYW51YWw7Cn0KICRyID0gJHRoaXMtPmdldCgiaHR0cHM6Ly9jbGFpbXNhdG9zaGkueHl6L2ZhdWNldCIsICR1YSk7CiRiID0gZXhwbG9kZSgnXCIjXCIgcmVsPVwiJywkcik7CiRiMSA9IGV4cGxvZGUoJ1wiJywkYlsxXSlbMF07CiRiMiA9IGV4cGxvZGUoJ1wiJywkYlsyXSlbMF07CiRiMyA9IGV4cGxvZGUoJ1wiJywkYlszXSlbMF07CiRib3QgPSR0aGlzLT4gYm90KCRiMSwkYjIsJGIzKVskaV07CiRjc3JmID0gJHRoaXMtPngoJ2lkPSJ0b2tlbiIgdmFsdWU9IicsJyInLCRyLDEpOwokdGsgPSAkdGhpcy0+eCgnbmFtZT0idG9rZW4iIHZhbHVlPSInLCciJywkciwxKTsKJHdhbD1maWxlX2dldF9jb250ZW50cygiZW1haWxfZnAiKTsKJGRhdGEgPSAiYW50aWJvdGxpbmtzPSRib3RbJGldJmNzcmZfdG9rZW5fbmFtZT0kY3NyZiZ0b2tlbj0kdGsmY2FwdGNoYT1yZWNhcHRjaGF2MyZyZWNhcHRjaGF2Mz0kY2FwJmctcmVjYXB0Y2hhLXJlc3BvbnNlPSI7CiAgICAgICAgICAgJHIyID0gc2VsZjo6cG9zdCgiaHR0cHM6Ly9jbGFpbXNhdG9zaGkueHl6L2ZhdWNldC92ZXJpZnkiLCAkZGF0YSwgJHVhKTsKICAgICAgICAgIGlmKHByZWdfbWF0Y2goJy9GaXJld2FsbC8nLCRyMikpe3NlbGY6OkZpcmV3YWxsKCR1YSk7IH0KICAgICAgICAgICAkc3VjPWV4cGxvZGUoIicsIixleHBsb2RlKCJHb29kIGpvYiEnLCAnIiwkcjIpWzFdKVswXTsKCiAgICAgICAgICAgICRmID0gZXhwbG9kZSgnPCcsZXhwbG9kZSgnPHAgY2xhc3M9ImxoLTEgbWItMSBmb250LXdlaWdodC1ib2xkIj4nLCRyKVszXSlbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzdWMpewogICAgICAgICAgICAgICAgICAgICAgICAkciA9ICR0aGlzLT5nZXQoImh0dHBzOi8vY2xhaW1kZ2IueHl6L2ZhdWNldC9jdXJyZW5jeS9kZ2IiLCAkdWEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNobyBoLiI+XyBHb29kIEpvYiEgIi5wLiRzdWMuIlxuIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGY6OmJhbGFuY2UoJHVhKTsKICBzZWxmOjpjbGFpbSgkdWEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmcoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBtYW51YWw7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNleyAgICAgIAogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgfQogICAgICAgIH19CiAgcHVibGljIGZ1bmN0aW9uIHB0YygpewogICAgICAgIHB0YzoKICAgICAgICB3aGlsZSh0cnVlKXsKICAgICAgICAKICAgICAgICAkY2FwID0gJHRoaXMtPnJlVjMoKTsKICAgICAgJHIgPSAkdGhpcy0+Z2V0KCJodHRwczovL2NsYWltc2F0b3NoaS54eXovcHRjIiwgJHVhKTsgCiAgICAgICR0aW1lID0gc2VsZjo6eCgnPHNwYW4gY2xhc3M9Im1zLWF1dG8gYmctcHVycGxlIj5UaW1lOiAnLCJzZWMiLCRyLDEpOwogICAgICAkaWQgPSBzZWxmOjp4KCdodHRwczovL2NsYWltc2F0b3NoaS54eXovcHRjL3ZpZXcvJywiJyIsJHIsMSk7CiAgICAgICAgIGlmKCRpZD09bnVsbCl7CiAgICAgICAgICR0aGlzLT5TbG93KG0uIiBQdGMgSGFiaXNcbiIpOwogICAgICAgICAkdGhpcy0+ZygpOwogICAgICAgICBleGl0OwogICAgICAgICB9CiAgICAgICAkciA9IHNlbGY6OmdldCgiaHR0cHM6Ly9jbGFpbXNhdG9zaGkueHl6L3B0Yy92aWV3LyRpZCIsICR1YSk7CiAgICAgICRjc3JmID0gc2VsZjo6eCgnbmFtZT0iY3NyZl90b2tlbl9uYW1lIiB2YWx1ZT0iJywnIicsJHIsMSk7CiR0ayA9IHNlbGY6OngoJ25hbWU9InRva2VuIiB2YWx1ZT0iJywnIicsJHIsMSk7CiAgc2VsZjo6dG1yKCR0aW1lKTsgICAgIAoKICAgICAgJGRhdGEgPSAiY2FwdGNoYT1yZWNhcHRjaGF2MyZyZWNhcHRjaGF2Mz0kY2FwJmNzcmZfdG9rZW5fbmFtZT0kY3NyZiZ0b2tlbj0kdGsiOwogICAgICAgICAgICRyMiA9IHNlbGY6OnBvc3QoImh0dHBzOi8vY2xhaW1zYXRvc2hpLnh5ei9wdGMvdmVyaWZ5LyRpZCIsICRkYXRhLCAkdWEpOwogICAgICAgICAgICAkc3VjPWV4cGxvZGUoIicsIixleHBsb2RlKCJHb29kIGpvYiEnLCAnIiwkcjIpWzFdKVswXTsKICAgICAgICAgICAgJGYgPSBzZWxmOjp4KCc8cCBjbGFzcz0ibGgtMSBtYi0xIGZvbnQtd2VpZ2h0LWJvbGQiPicsJzwnLCRyMiwzKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHN1Yyl7CiAgICAgIGVjaG8gaC4iPl8gR29vZCBqb2IhJywgIi5wLiRzdWMuIlxuIjsKIHNlbGY6OmJhbGFuY2UoJHVhKTsKJHRoaXMtPmcoKTsKZ290byBwdGM7CiAgIH1lbHNlewogZ290byBwdGM7CiAgICAgIH0KICAgIH0KfQpwdWJsaWMgZnVuY3Rpb24gd2QoKXsKd2Q6CiAgJHIgPSAkdGhpcy0+Z2V0KCJodHRwczovL2hhcnNoY29pbi5jb20vd2l0aGRyYXciLCAkdWEpOyAKICRjc3JmID0gc2VsZjo6eCgnbmFtZT0iY3NyZl90b2tlbl9uYW1lIiB2YWx1ZT0iJywnIicsJHIsMSk7CiAkYW1vbiA9IHNlbGY6OngoJzxpbnB1dCB0eXBlPSJudW1iZXIiIG5hbWU9ImFtb3VudCIgaWQ9InRva2VuQmFsYW5jZSIgdmFsdWU9IicsJyInLCRyLDEpOwokd2FsPWZpbGVfZ2V0X2NvbnRlbnRzKCJlbWFpbF9mcCIpOwogICRkYXRhID0gImNzcmZfdG9rZW5fbmFtZT0kY3NyZiZtZXRob2Q9JG1ldCZhbW91bnQ9JGFtb24md2FsbGV0PSR3YWwiOwogZWNobyAkY3lhbi4iIFsyXS5MVENcbiI7CmVjaG8gJGN5YW4uIiBbNV0uREdCXG4iOwplY2hvICRjeWFuLiIgWzZdLkJUQ1xuIjsKZWNobyAkY3lhbi4iIFs3XS5UUlhcbiI7CiRtZXQ9cmVhZGxpbmUoIklOUFVUIE5VTUJFUjogIik7CiAgCiAgCiAgCiAgICAgICAgICAgJHIyID0gc2VsZjo6cG9zdCgiaHR0cHM6Ly9oYXJzaGNvaW4uY29tL3dpdGhkcmF3L3dpdGhkcmF3IiwgJGRhdGEsICR1YSk7CiAgICAgICAgICAgICRzdWMgPSBzZWxmOjp4KCJHb29kIGpvYiEnLCAnIiwiIScsICdzdWNjZXNzIiwkcjIsMSk7CiAgICAgICAgICAgICRmID0gc2VsZjo6eCgnPHAgY2xhc3M9ImxoLTEgbWItMSBmb250LXdlaWdodC1ib2xkIj4nLCc8JywkcjEsMyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzdWMpewplY2hvIGguIj5fIEdvb2Qgam9iIScsICIucC4kc3VjLiJcbiI7CmV4aXQ7Cn1lbHNlewplY2hvIG0uIiBJbnZhbGlkXG4iOwpleGl0Owp9Cn0KCnB1YmxpYyBmdW5jdGlvbiBGaXJld2FsbCgkdWEpewogICAgICAgICAgICAgICBhOgogICAgICAgICAgICRjYXAgPSAkdGhpcy0+cmVWMygpOwogICAgICAgJHIgPSAkdGhpcy0+Z2V0KCJodHRwczovL2NsYWltc2F0b3NoaS54eXovZmlyZXdhbGwiLCAkdWEpOyAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICRjc3JmID0gJHRoaXMtPngoJ2NzcmZfdG9rZW5fbmFtZSIgdmFsdWU9IicsJyInLCRyLDEpOwogICAgICAgICAgICAgICAgJGRhdGEgPSAicmVjYXB0Y2hhdjM9JGNhcCZjYXB0Y2hhVHlwZT1yZWNhcHRjaGF2MyZjc3JmX3Rva2VuX25hbWU9JGNzcmYiOwogICAgICAgICAgICRyMiA9IHNlbGY6OnBvc3QoImh0dHBzOi8vY2xhaW1zYXRvc2hpLnh5ei9maXJld2FsbC92ZXJpZnkiLCAkZGF0YSwgJHVhKTsKICAgICAgICAgICAKICAgICAgICAgICBpZihwcmVnX21hdGNoKCcvRmlyZXdhbGwvJywkcjIpKXtzZWxmOjpGaXJld2FsbCgkdWEpOyB9ZWxzZXsKCiAgICAgICAgIAoJZWNobyBoLiI+XyBTdWNjZXNzIEJ5cGFzcyBGaXJld2FsbFxuIjsKCXNsZWVwKDUpOwoJc2VsZjo6ZygpOwoJJHRoaXMtPmZhdWNldCgpOwp9fQoKCiAgcHVibGljIGZ1bmN0aW9uIGJhbGFuY2UoJHVhKXsgICAgCiAgJHVhID0gYXJyYXkoIkhvc3Q6ICIuaG9zdCwiWC1SZXF1ZXN0ZWQtV2l0aDogWE1MSHR0cFJlcXVlc3QiLCJ1c2VyLWFnZW50OiAiLmZpbGVfZ2V0X2NvbnRlbnRzKCJVc2VyX0FnZW50IiksIkNvb2tpZTogIi5maWxlX2dldF9jb250ZW50cygiQ29va2llIikpOyAKICAgIGVjaG8gaC4iPl8gQmFsYW5jZSAtPiAiLnAuc2VsZjo6eCgnPGgyIGNsYXNzPSJjYXJkLXRpdGxlIHRleHQtd2hpdGUiPicsJzwnLHNlbGY6OmdldCgiaHR0cHM6Ly9jbGFpbXNhdG9zaGkueHl6L2Rhc2hib2FyZCIsICR1YSksMSkuIlxuIjsKICAgICAgICAgICB9CiAgIHB1YmxpYyBmdW5jdGlvbiBjbGFpbSgkdWEpewogICAkdWEgPSBhcnJheSgiSG9zdDogIi5ob3N0LCJYLVJlcXVlc3RlZC1XaXRoOiBYTUxIdHRwUmVxdWVzdCIsInVzZXItYWdlbnQ6ICIuZmlsZV9nZXRfY29udGVudHMoIlVzZXJfQWdlbnQiKSwiQ29va2llOiAiLmZpbGVfZ2V0X2NvbnRlbnRzKCJDb29raWUiKSk7IAogICAgZWNobyBoLiI+XyBDbGFpbUxlZnQgLT4gIi5wLnNlbGY6OngoJzxoMiBjbGFzcz0iY2FyZC10aXRsZSB0ZXh0LXdoaXRlIj4nLCc8JyxzZWxmOjpnZXQoImh0dHBzOi8vY2xhaW1zYXRvc2hpLnh5ei9mYXVjZXQiLCAkdWEpLDQpLiJcbiI7CiAgICAgICAgICB9CnB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpewoKc2VsZjo6cygpOwpzZWxmOjpwdygpOwokY29rPXNlbGY6OnNhdmUoIkNvb2tpZSIpOwokdXNlcj1zZWxmOjpzYXZlKCJVc2VyX0FnZW50Iik7CiRjaG9yPXNlbGY6OnNhdmUoIlVybF9hbmNob3IiKTsKCnNlbGY6OmJhbm5lcihob3N0LHZlcik7CnNlbGY6OmJhbGFuY2UoJHVhKTsKc2VsZjo6Y2xhaW0oJHVhKTsKICBzZWxmOjpnKCk7CnNlbGY6Om1lbnUoMSwiIEJ5cGFzcyBGYXVjZXQiKTsKc2VsZjo6bWVudSgyLCIgQnlwYXNzIFB0YyIpOwokbWVudT1yZWFkbGluZShzZWxmOjpjb2woc3RydG91cHBlcigicGlsaWg6IiksIm1wIikgKTtzZWxmOjpnKCk7CnN3aXRjaCAoJG1lbnUpIHsKY2FzZSAxOnNlbGY6OmZhdWNldCgpOwpjYXNlIDI6c2VsZjo6cHRjKCk7Cn19fQoobmV3IGJvdCk7"}}
